{"version":3,"file":"index-658b84cf.js","sources":["../../../src/hooks/useValidation.tsx","../../../src/components/molecules/Textbox/index.tsx"],"sourcesContent":["import {\n  useCallback as createCallback,\n  useState as createState,\n  useContext as getContext,\n  useEffect as createEffect,\n} from 'react';\n\nimport { ValidationContext } from '../utils';\n\nexport type Validation<_Value> =\n  | ((value: _Value) => string | undefined)\n  | undefined\n  | null;\n\nexport const useValidation = <_Value,>(\n  value: _Value,\n  validation: Validation<_Value>,\n  storeKey?: string,\n) => {\n  if (!validation) {\n    if (validation === null) return { validationMessage: null };\n    return {};\n  }\n\n  const [validationMessage, setValidationMessage] = createState<\n    string | undefined\n  >();\n\n  const checkValidation = createCallback(\n    (value: _Value) => setValidationMessage(validation(value)),\n    [validation],\n  );\n\n  if (storeKey) {\n    const store = getContext(ValidationContext);\n    if (store) {\n      createEffect(() => {\n        store.set(storeKey, () => {\n          const validationMessage = validation(value);\n          setValidationMessage(validationMessage);\n          return validationMessage;\n        });\n        return () => {\n          store.delete(storeKey);\n        };\n      }, [validation, value, storeKey]);\n    }\n  }\n\n  return {\n    validationMessage,\n    checkValidation,\n  };\n};\n","import styles from './index.module.scss';\nimport { useValidation } from '../../../hooks';\nimport { InputContainer, Input } from '../../atoms';\n\nimport type { Validation } from '../../../hooks';\nimport type {\n  InputProps,\n  InputContainerProps,\n  InputContainerIntreractionProps,\n} from '../../atoms';\n\nexport interface TextboxProps\n  extends Omit<\n    InputProps & InputContainerProps & InputContainerIntreractionProps,\n    'validationMessage' | 'children' | 'disabled' | 'readonly'\n  > {\n  unit?: React.ReactNode;\n  validation?: Validation<TextboxProps['value']>;\n  disabled?: boolean | 'readonly';\n}\n\nexport const Textbox = ({\n  value,\n  unit,\n  onChange,\n  size,\n  id,\n  validation,\n  className,\n  disabled,\n  theme,\n  ...inputProps\n}: TextboxProps) => {\n  const { validationMessage, checkValidation } = useValidation(\n    value,\n    validation,\n    id,\n  );\n\n  return (\n    <InputContainer validationMessage={validationMessage}>\n      <InputContainer.Intreraction\n        size={size}\n        readonly={disabled === 'readonly'}\n        theme={theme}\n        className={className}\n      >\n        <Input\n          {...inputProps}\n          disabled={!!disabled}\n          value={value}\n          id={id}\n          onChange={(value) => {\n            checkValidation?.(value);\n            onChange?.(value);\n          }}\n        />\n        {typeof unit === 'string' ? (\n          <div className={styles.unit}>{unit}</div>\n        ) : (\n          unit\n        )}\n      </InputContainer.Intreraction>\n    </InputContainer>\n  );\n};\n"],"names":["useValidation","value","validation","storeKey","validationMessage","setValidationMessage","createState","checkValidation","createCallback","store","getContext","ValidationContext","createEffect","Textbox","unit","onChange","size","id","className","disabled","theme","inputProps","jsx","InputContainer","jsxs","Input","value2","styles"],"mappings":"sIAcO,MAAMA,EAAgB,CAC3BC,EACAC,EACAC,IACG,CACH,GAAI,CAACD,EACH,OAAIA,IAAe,KAAa,CAAE,kBAAmB,MAC9C,GAGT,KAAM,CAACE,EAAmBC,CAAoB,EAAIC,EAEhD,SAAA,EAEIC,EAAkBC,EAAA,YACrBP,GAAkBI,EAAqBH,EAAWD,CAAK,CAAC,EACzD,CAACC,CAAU,CAAA,EAGb,GAAIC,EAAU,CACN,MAAAM,EAAQC,aAAWC,CAAiB,EACtCF,GACFG,EAAAA,UAAa,KACLH,EAAA,IAAIN,EAAU,IAAM,CAClBC,MAAAA,EAAoBF,EAAWD,CAAK,EAC1C,OAAAI,EAAqBD,CAAiB,EAC/BA,CAAA,CACR,EACM,IAAM,CACXK,EAAM,OAAON,CAAQ,CAAA,GAEtB,CAACD,EAAYD,EAAOE,CAAQ,CAAC,EAI7B,MAAA,CACL,kBAAAC,EACA,gBAAAG,CAAA,CAEJ,qrBChCOM,EAAA,CAAA,CAAiB,MAAAZ,EACtB,KAAAa,EACA,SAAAC,EACA,KAAAC,EACA,GAAAC,EACA,WAAAf,EACA,UAAAgB,EACA,SAAAC,EACA,MAAAC,EACA,GAAAC,CAEF,IAAA,CACE,KAAA,CAAA,kBAAAjB,EAAA,gBAAAG,CAAA,EAAAP,EAA+CC,EAC7CC,EACAe,CACA,EAGF,OAAAK,EAAA,IAAAC,EAAA,CAAA,kBAAAnB,EAAA,SAAAoB,EAAA,KAEID,EAAA,aAAgB,CAAf,KAAAP,EACC,SAAAG,IAAA,WACuB,MAAAC,EACvB,UAAAF,EACA,SAAA,CAEAI,EAAA,IAAAG,EAAC,CAAA,GAAAJ,EACK,SAAA,CAAA,CAAAF,EACQ,MAAAlB,EACZ,GAAAgB,EACA,SAAAS,GAAA,CAEEnB,GAAA,MAAAA,EAAAmB,GACAX,GAAA,MAAAA,EAAAW,EAAgB,CAClB,CAAA,EACF,OAAAZ,GAAA,SAAAQ,EAAA,IAAA,MAAA,CAAA,UAAAK,EAAA,KAAA,SAAAb,CAAA,CAAA,EAAAA,CAIE,CAAA,CAAA,CAAA,CAAA,CAKV"}