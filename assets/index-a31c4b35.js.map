{"version":3,"file":"index-a31c4b35.js","sources":["../../../src/hooks/useClosingState.tsx","../../../src/components/atoms/FocusLayer/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nexport const useClosingState = (opened = false, closingDuration = 300) => {\n  const state = useState<boolean | 'closing'>(opened);\n  const [status, setStatus] = state;\n\n  useEffect(\n    () =>\n      setStatus(\n        opened ? true : (beforeStatus) => (beforeStatus ? 'closing' : false),\n      ),\n    [opened, setStatus],\n  );\n\n  const isClosing = status === 'closing';\n  useEffect(() => {\n    if (isClosing) {\n      const timer = setTimeout(() => {\n        setStatus(false);\n      }, closingDuration);\n      return () => clearTimeout(timer);\n    }\n  }, [closingDuration, isClosing, setStatus]);\n\n  return state;\n};\n","import { useEffect, useMemo } from 'react';\n\nimport styles from './index.module.scss';\nimport { useClosingState } from '../../../hooks';\nimport { cleanClassName } from '../../../utils';\n\ntype HTMLDivProps = React.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLDivElement>,\n  HTMLDivElement\n>;\n\nexport interface FocusLayerProps extends Omit<HTMLDivProps, 'style'> {\n  focused?: boolean;\n  blur?: boolean;\n  backgroundScroll?: boolean;\n  style?: Omit<React.CSSProperties, 'zIndex'> & { zIndex?: number };\n}\n\nexport const FocusLayer = ({\n  children,\n  onClick,\n  focused,\n  blur,\n  className,\n  backgroundScroll = false,\n  style,\n  ...restDivProps\n}: FocusLayerProps) => {\n  const [focusStatus] = useClosingState(focused);\n  const isClosing = focusStatus === 'closing';\n\n  const [focusLayerStyle, backgroundLayerStyle] = useMemo(() => {\n    const zIndex = 100 + (style?.zIndex ?? 0);\n    return [{ ...style, zIndex }, { zIndex: zIndex - 1 }];\n  }, [style]);\n\n  useEffect(() => {\n    if (!backgroundScroll) {\n      const { classList } = document.body;\n      if (focused) classList.add(styles['fixed-body']);\n      return () => classList.remove(styles['fixed-body']);\n    }\n  }, [focused, backgroundScroll]);\n\n  return (\n    <>\n      <div\n        {...restDivProps}\n        style={focusLayerStyle}\n        className={cleanClassName(`${styles['focus-layer']} ${className}`)}\n      >\n        {children}\n      </div>\n      {focusStatus ? (\n        <div\n          onClick={onClick}\n          style={backgroundLayerStyle}\n          className={cleanClassName(\n            `${styles['background-layer']} ${isClosing && styles.closing} ${\n              blur && styles.blur\n            }`,\n          )}\n        />\n      ) : null}\n    </>\n  );\n};\n"],"names":["useClosingState","opened","closingDuration","state","useState","status","setStatus","useEffect","beforeStatus","isClosing","timer","FocusLayer","children","onClick","focused","blur","className","backgroundScroll","style","restDivProps","focusStatus","focusLayerStyle","backgroundLayerStyle","useMemo","zIndex","classList","styles","jsxs","Fragment","jsx","cleanClassName"],"mappings":"w4BAEaA,EAAkB,CAACC,EAAS,GAAOC,EAAkB,MAAQ,CAClE,MAAAC,EAAQC,WAA8BH,CAAM,EAC5C,CAACI,EAAQC,CAAS,EAAIH,EAE5BI,EAAA,UACE,IACED,EACEL,EAAS,GAAQO,GAAkBA,EAAe,UAAY,EAChE,EACF,CAACP,EAAQK,CAAS,CAAA,EAGpB,MAAMG,EAAYJ,IAAW,UAC7BE,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIE,EAAW,CACP,MAAAC,EAAQ,WAAW,IAAM,CAC7BJ,EAAU,EAAK,GACdJ,CAAe,EACX,MAAA,IAAM,aAAaQ,CAAK,EAEhC,EAAA,CAACR,EAAiBO,EAAWH,CAAS,CAAC,EAEnCH,CACT,ECPOQ,EAAA,CAAA,CAAoB,SAAAC,EACzB,QAAAC,EACA,QAAAC,EACA,KAAAC,EACA,UAAAC,EACA,iBAAAC,EAAA,GACmB,MAAAC,EACnB,GAAAC,CAEF,IAAA,CACE,KAAA,CAAAC,CAAA,EAAApB,EAAAc,CAAA,EACAL,EAAAW,IAAA,UAEA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,IAAA,CACE,MAAAC,EAAA,MAAAN,GAAA,YAAAA,EAAA,SAAA,GACA,MAAA,CAAA,CAAA,GAAAA,EAAA,OAAAM,CAAA,EAAA,CAAA,OAAAA,EAAA,CAAA,CAAA,CAAoD,EAAA,CAAAN,CAAA,CAAA,EAGtDX,OAAAA,EAAAA,UAAA,IAAA,CACE,GAAA,CAAAU,EAAA,CACE,KAAA,CAAA,UAAAQ,CAAA,EAAA,SAAA,KACA,OAAAX,GAAaW,EAAA,IAAAC,EAAA,YAAA,CAAA,EACb,IAAAD,EAAA,OAAAC,EAAA,YAAA,CAAA,EACF,EAAA,CAAAZ,EAAAG,CAAA,CAAA,EAGFU,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEIC,EAAA,IAAA,MAAC,CAAA,GAAAV,EACK,MAAAE,EACG,UAAAS,EAAA,GAAAJ,EAAA,aAAA,KAAAV,GAAA,EAC0D,SAAAJ,CAEhE,CAAA,EACHQ,EAAAS,EAAA,IAEE,MAAC,CAAA,QAAAhB,EACC,MAAAS,EACO,UAAAQ,EACI,GAAAJ,EAAA,kBAAA,KAAAjB,GAAAiB,EAAA,WAAAX,GAAAW,EAAA,MAEQ,CAEnB,CAAA,EAAA,IAEA,CAAA,CAAA,CAGV"}