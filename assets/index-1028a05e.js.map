{"version":3,"file":"index-1028a05e.js","sources":["../../../src/components/molecules/Textarea/index.tsx"],"sourcesContent":["import { forwardRef } from 'react';\n\nimport { Input } from '@components/atoms';\nimport type { InputWrapProps } from '@components/atoms';\nimport {\n  useSubscribedState,\n  useTextareaDynamicHeight,\n  useValidationMessage,\n} from '@hooks';\nimport type { ValidateHandler } from '@hooks';\nimport type { HTMLTagProps, InnerStateChangeEventHandler, Size } from '@types';\nimport { cleanClassName } from '@utils';\n\nimport styles from './index.module.scss';\n\ninterface TextareaProps\n  extends Pick<\n      InputWrapProps,\n      'className' | 'style' | 'label' | 'reversed' | 'fixedDarkMode'\n    >,\n    Omit<\n      HTMLTagProps<'textarea'>,\n      'resize' | 'className' | 'style' | 'rows' | 'onChange'\n    > {\n  size?: Size;\n  value?: string;\n  onChange?: InnerStateChangeEventHandler<string>;\n  children?: React.ReactNode;\n  validation?: ValidateHandler<TextareaProps['value']>;\n  ref?: React.ForwardedRef<HTMLTextAreaElement>;\n}\n\nexport const Textarea = forwardRef<\n  HTMLTextAreaElement,\n  Omit<TextareaProps, 'ref'>\n>(\n  (\n    {\n      //* Textarea props\n      size = 'medium',\n      value,\n      onChange,\n      children,\n      validation,\n\n      //* InputWrap props\n      className,\n      style,\n      label,\n      reversed,\n      fixedDarkMode,\n\n      //* HTML textarea props\n      onInvalid,\n      ...restTextareaProps\n    },\n    ref,\n  ) => {\n    const { textareaRef, handleTextareaHeight } = useTextareaDynamicHeight(ref);\n    const [textareaValue, setTextareaValue, preventInnerStateChange] =\n      useSubscribedState(value);\n\n    const { required, id } = restTextareaProps;\n\n    const { validationMessage, validateOnChange } = useValidationMessage({\n      validateHandler: validation,\n      value: textareaValue,\n      key: id,\n    });\n\n    return (\n      <Input.Wrap\n        size=\"fit-content\"\n        className={className}\n        style={style}\n        validationMessage={validationMessage}\n        label={label}\n        required={required}\n        fixedDarkMode={fixedDarkMode}\n      >\n        <div\n          className={cleanClassName(\n            `${styles['textarea-wrap']} ${styles[`size-${size}`]} ${\n              reversed && styles.reversed\n            }`,\n          )}\n        >\n          <textarea\n            {...restTextareaProps}\n            value={textareaValue}\n            rows={1}\n            className={styles.textarea}\n            required={required}\n            ref={textareaRef}\n            onChange={({ target }) => {\n              const { value } = target;\n              onChange?.({\n                value,\n                preventInnerStateChange,\n              });\n              setTextareaValue(value);\n              validateOnChange?.(value);\n              handleTextareaHeight(target);\n            }}\n            onInvalid={(e) => {\n              e.preventDefault();\n              onInvalid?.(e);\n            }}\n          />\n          {children ? (\n            <div className={styles.decoration}>{children}</div>\n          ) : null}\n        </div>\n      </Input.Wrap>\n    );\n  },\n);\n"],"names":["Textarea","forwardRef","size","value","onChange","children","validation","className","style","label","reversed","fixedDarkMode","onInvalid","restTextareaProps","ref","textareaRef","handleTextareaHeight","useTextareaDynamicHeight","textareaValue","setTextareaValue","preventInnerStateChange","useSubscribedState","required","id","validationMessage","validateOnChange","useValidationMessage","jsx","Input","jsxs","cleanClassName","styles","target","value2"],"mappings":"k3CAgCOA,EAAAC,EAAA,WAAiB,CAAA,CAKpB,KAAAC,EAAA,SAES,MAAAC,EACP,SAAAC,EACA,SAAAC,EACA,WAAAC,EACA,UAAAC,EAGA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,cAAAC,EACA,UAAAC,EAGA,GAAAC,CACG,EAAAC,IAAA,CAIL,KAAA,CAAA,YAAAC,EAAA,qBAAAC,CAAA,EAAAC,EAAAH,CAAA,EACA,CAAAI,EAAAC,EAAAC,CAAA,EAAAC,EAAAlB,CAAA,EAGA,CAAA,SAAAmB,EAAA,GAAAC,CAAA,EAAAV,EAEA,CAAA,kBAAAW,EAAA,iBAAAC,CAAA,EAAAC,EAAA,CAAqE,gBAAApB,EAClD,MAAAY,EACV,IAAAK,CACF,CAAA,EAGP,OAAAI,EAAA,IACEC,EAAA,KAAO,CAAN,KAAA,cACM,UAAArB,EACL,MAAAC,EACA,kBAAAgB,EACA,MAAAf,EACA,SAAAa,EACA,cAAAX,EACA,SAAAkB,EAAA,KAEA,MAAC,CAAA,UAAAC,EACY,GAAAC,EAAA,eAAA,CAAA,IAAAA,EAAA,QAAA7B,CAAA,EAAA,CAAA,IAAAQ,GAAAqB,EAAA,QAAA,EAGT,EACF,SAAA,CAEAJ,EAAA,IAAA,WAAC,CAAA,GAAAd,EACK,MAAAK,EACG,KAAA,EACD,UAAAa,EAAA,SACY,SAAAT,EAClB,IAAAP,EACK,SAAA,CAAA,CAAA,OAAAiB,KAAA,CAEH,KAAA,CAAA,MAAAC,CAAA,EAAAD,EACA5B,GAAA,MAAAA,EAAA,CAAW,MAAA6B,EACT,wBAAAb,CACA,GAEFD,EAAAc,CAAA,EACAR,GAAA,MAAAA,EAAAQ,GACAjB,EAAAgB,CAAA,CAA2B,EAC7B,UAAA,GAAA,CAEE,EAAA,eAAA,EACApB,GAAA,MAAAA,EAAA,EAAa,CACf,CAAA,EACFP,EAAAsB,EAAAA,IAAA,MAAA,CAAA,UAAAI,EAAA,WAAA,SAAA1B,CAAA,CAAA,EAAA,IAGI,CAAA,CAAA,CACN,CAAA,CACF,CAGN"}