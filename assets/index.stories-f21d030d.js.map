{"version":3,"file":"index.stories-f21d030d.js","sources":["../../../node_modules/.pnpm/react-feather@2.0.10_react@18.2.0/node_modules/react-feather/dist/icons/percent.js","../../../src/hooks/useValidation.tsx","../../../src/components/molecules/Textbox/index.tsx"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Percent = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"19\",\n    y1: \"5\",\n    x2: \"5\",\n    y2: \"19\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"6.5\",\n    cy: \"6.5\",\n    r: \"2.5\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"17.5\",\n    cy: \"17.5\",\n    r: \"2.5\"\n  }));\n});\nPercent.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nPercent.displayName = 'Percent';\nexport default Percent;","import {\n  useCallback as createCallback,\n  useState as createState,\n  useContext as getContext,\n  useEffect as createEffect,\n} from 'react';\n\nimport { ValidationContext } from '../utils';\n\nexport type Validation<_Value> =\n  | ((value: _Value) => string | undefined)\n  | undefined\n  | null;\n\nexport const useValidation = <_Value,>(\n  value: _Value,\n  validation: Validation<_Value>,\n  storeKey?: string,\n) => {\n  if (!validation) {\n    if (validation === null) return { validationMessage: null };\n    return {};\n  }\n\n  const [validationMessage, setValidationMessage] = createState<\n    string | undefined\n  >();\n\n  const checkValidation = createCallback(\n    (value: _Value) => setValidationMessage(validation(value)),\n    [validation],\n  );\n\n  if (storeKey) {\n    const store = getContext(ValidationContext);\n    if (store) {\n      createEffect(() => {\n        store.set(storeKey, () => {\n          const validationMessage = validation(value);\n          setValidationMessage(validationMessage);\n          return validationMessage;\n        });\n        return () => {\n          store.delete(storeKey);\n        };\n      }, [validation, value, storeKey]);\n    }\n  }\n\n  return {\n    validationMessage,\n    checkValidation,\n  };\n};\n","import styles from './index.module.scss';\nimport { useSubscribedState, useValidation } from '../../../hooks';\nimport { cleanClassName } from '../../../utils';\nimport { Input } from '../../atoms';\n\nimport type { Validation } from '../../../hooks';\nimport type { InputProps, InputWrapProps, InputType } from '../../atoms';\n\nexport interface TextboxProps\n  extends Omit<InputProps, 'className' | 'size'>,\n    Pick<InputWrapProps, 'size' | 'theme' | 'className'> {\n  unit?: React.ReactNode;\n  type?: Exclude<InputType, 'button'>;\n  validation?: Validation<TextboxProps['value']>;\n}\n\nexport const Textbox = ({\n  value: parentValue,\n  unit,\n  onChange,\n  size,\n  validation,\n  className,\n  theme = 'light',\n  type,\n  id,\n  ...restInputProps\n}: TextboxProps) => {\n  const [value, setValue] = useSubscribedState(parentValue);\n  const { validationMessage, checkValidation } = useValidation(\n    value,\n    validation,\n    id,\n  );\n\n  return (\n    <Input.Container validationMessage={validationMessage}>\n      <Input.Wrap size={size} theme={theme} className={className}>\n        <Input\n          {...restInputProps}\n          type={type}\n          value={value}\n          id={id}\n          onChange={(value) => {\n            checkValidation?.(value);\n            setValue(value);\n            onChange?.(value);\n          }}\n        />\n        {unit ? (\n          <div className={cleanClassName(`${styles.unit} ${styles[theme]}`)}>\n            {unit}\n          </div>\n        ) : null}\n      </Input.Wrap>\n    </Input.Container>\n  );\n};\n"],"names":["_extends","target","i","source","key","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","sourceKeys","Percent","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","rest","React","PropTypes","Percent$1","useValidation","value","validation","storeKey","validationMessage","setValidationMessage","createState","checkValidation","createCallback","store","getContext","ValidationContext","createEffect","Textbox","parentValue","unit","onChange","className","theme","type","id","restInputProps","setValue","useSubscribedState","jsx","Input","jsxs","value2","cleanClassName","styles"],"mappings":"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","x_google_ignoreList":[0]}